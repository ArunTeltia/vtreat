<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Statistically Sound 'data.frame' Processor/Conditioner • vtreat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Statistically Sound 'data.frame' Processor/Conditioner">
<meta property="og:description" content="A 'data.frame' processor/conditioner that prepares real-world data for predictive modeling in a statistically sound manner.
    'vtreat' prepares variables so that data has fewer exceptional cases, making
    it easier to safely use models in production. Common problems 'vtreat' defends
    against: 'Inf', 'NA', too many categorical levels, rare categorical levels, and new
    categorical levels (levels seen during application, but not during training). Reference: 
    &quot;'vtreat': a data.frame Processor for Predictive Modeling&quot;, Zumel, Mount, 2016, &lt;DOI:10.5281/zenodo.1173313&gt;.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">vtreat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/vtreat.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/MultiClassVtreat.html">Multi Class vtreat</a>
    </li>
    <li>
      <a href="articles/SavingTreamentPlans.html">Saving Treatment Plans</a>
    </li>
    <li>
      <a href="articles/VariableImportance.html">vtreat Variable Importance</a>
    </li>
    <li>
      <a href="articles/vtreatCrossFrames.html">vtreat cross frames</a>
    </li>
    <li>
      <a href="articles/vtreatGrouping.html">Grouping Example</a>
    </li>
    <li>
      <a href="articles/vtreatOverfit.html">vtreat overfit</a>
    </li>
    <li>
      <a href="articles/vtreatRareLevels.html">vtreat Rare Levels</a>
    </li>
    <li>
      <a href="articles/vtreatScaleMode.html">vtreat scale mode</a>
    </li>
    <li>
      <a href="articles/vtreatSignificance.html">vtreat significance</a>
    </li>
    <li>
      <a href="articles/vtreatSplitting.html">vtreat splitting</a>
    </li>
    <li>
      <a href="articles/vtreatVariableTypes.html">Variable Types</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://www.win-vector.com/">Sponsor: Win-Vector LLC</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<p><code>vtreat</code> is a <code>data.frame</code> processor/conditioner (available <a href="https://github.com/WinVector/vtreat">for <code>R</code></a>, and <a href="https://github.com/WinVector/pyvtreat">for <code>Python</code></a>) that prepares real-world data for supervised machine learning or predictive modeling in a statistically sound manner.</p>
<p><code>vtreat</code> takes an input <code>data.frame</code> that has a specified column called “the outcome variable” (or “y”) that is the quantity to be predicted (and must not have missing values). Other input columns are possible explanatory variables (typically numeric or categorical/string-valued, these columns may have missing values) that the user later wants to use to predict “y”. In practice such an input <code>data.frame</code> may not be immediately suitable for machine learning procedures that often expect only numeric explanatory variables, and may not tolerate missing values.</p>
<p>To solve this, <code>vtreat</code> builds a transformed <code>data.frame</code> where all explanatory variable columns have been transformed into a number of numeric explanatory variable columns, without missing values. The <code>vtreat</code> implementation produces derived numeric columns that capture most of the information relating the explanatory columns to the specified “y” or dependent/outcome column through a number of numeric transforms (indicator variables, impact codes, prevalence codes, and more). This transformed <code>data.frame</code> is suitable for a wide range of supervised learning methods from linear regression, through gradient boosted machines.</p>
<p>The idea is: you can take a <code>data.frame</code> of messy real world data and easily, faithfully, reliably, and repeatably prepare it for machine learning using documented methods using <code>vtreat</code>. Incorporating <code>vtreat</code> into your machine learning workflow lets you quickly work with very diverse structured data.</p>
<p>In all cases (classification, regression, unsupervised, and multinomial classification) the intent is that <code>vtreat</code> transforms are essentially one liners.</p>
<p>The preparation commands are organized as follows:</p>
<ul>
<li>
<strong>Regression</strong>: <a href="https://github.com/WinVector/vtreat/blob/master/Examples/Regression/Regression.md"><code>R</code> regression example</a>, <a href="https://github.com/WinVector/pyvtreat/blob/master/Examples/Regression/Regression.md"><code>Python</code> regression example</a>.</li>
<li>
<strong>Classification</strong>: <a href="https://github.com/WinVector/vtreat/blob/master/Examples/Classification/Classification.md"><code>R</code> classification example</a>, <a href="https://github.com/WinVector/pyvtreat/blob/master/Examples/Classification/Classification.md"><code>Python</code> classification example</a>.</li>
<li>
<strong>Unsupervised tasks</strong>: <a href="https://github.com/WinVector/vtreat/blob/master/Examples/Unsupervised/Unsupervised.md"><code>R</code> unsupervised example</a>, <a href="https://github.com/WinVector/pyvtreat/blob/master/Examples/Unsupervised/Unsupervised.md"><code>Python</code> unsupervised example</a>.</li>
<li>
<strong>Multinomial classification</strong>: <a href="https://github.com/WinVector/vtreat/blob/master/Examples/Multinomial/MultinomialExample.md"><code>R</code> multinomial classification example</a>, <a href="https://github.com/WinVector/pyvtreat/blob/master/Examples/Multinomial/MultinomialExample.md"><code>Python</code> multinomial classification example</a>.</li>
</ul>
<p>In all cases: variable preperation is intended to be a “one liner.”</p>
<p>These current revisions of the examples are designed to be small, yet complete. So as a set they have some overlap, but the user can rely mostly on a single example for a single task type.</p>
<p>For more detail please see here: <a href="https://arxiv.org/abs/1611.09477">arXiv:1611.09477 stat.AP</a> (the documentation describes the <code>R</code> version, however all of the examples can be found worked in <code>Python</code> <a href="https://github.com/WinVector/pyvtreat/tree/master/Examples/vtreat_paper1">here</a>).</p>
<p><code>vtreat</code> is available as an <a href="https://github.com/WinVector/vtreat"><code>R</code> package</a>, and also as a <a href="https://github.com/WinVector/vtreat"><code>Python</code>/<code>Pandas</code> package</a>.</p>
<p><img src="https://github.com/WinVector/vtreat/raw/master/tools/vtreat.png"></p>
<p>(logo: Julie Mount, source: “The Harvest” by Boris Kustodiev 1914)</p>
<p>Even with modern machine learning techniques (random forests, support vector machines, neural nets, gradient boosted trees, and so on) or standard statistical methods (regression, generalized regression, generalized additive models) there are <em>common</em> data issues that can cause modeling to fail. vtreat deals with a number of these in a principled and automated fashion.</p>
<p>In particular vtreat emphasizes a concept called “y-aware pre-processing” and implements:</p>
<ul>
<li>Treatment of missing values through safe replacement plus indicator column (a simple but very powerful method when combined with downstream machine learning algorithms).</li>
<li>Treatment of novel levels (new values of categorical variable seen during test or application, but not seen during training) through sub-models (or impact/effects coding of pooled rare events).</li>
<li>Explicit coding of categorical variable levels as new indicator variables (with optional suppression of non-significant indicators).</li>
<li>Treatment of categorical variables with very large numbers of levels through sub-models (again <a href="http://www.win-vector.com/blog/2012/07/modeling-trick-impact-coding-of-categorical-variables-with-many-levels/">impact/effects coding</a>).</li>
<li>(optional) User specified significance pruning on levels coded into effects/impact sub-models.</li>
<li>Correct treatment of nested models or sub-models through data split (see <a href="https://winvector.github.io/vtreat/articles/vtreatOverfit.html">here</a>) or through the generation of “cross validated” data frames (see <a href="https://winvector.github.io/vtreat/articles/vtreatCrossFrames.html">here</a>); these are issues similar to what is required to build statistically efficient stacked models or super-learners).</li>
<li>Safe processing of “wide data” (data with very many variables, often driving common machine learning algorithms to over-fit) through <a href="https://winvector.github.io/vtreat/articles/vtreatSignificance.html">out of sample per-variable significance estimates and user controllable pruning</a> (something we have lectured on previously <a href="https://github.com/WinVector/WinVector.github.io/tree/master/DS">here</a> and <a href="http://www.win-vector.com/blog/2014/02/bad-bayes-an-example-of-why-you-need-hold-out-testing/">here</a>).</li>
<li>Collaring/Winsorizing of unexpected out of range numeric inputs.</li>
<li>(optional) Conversion of all variables into effects (or “y-scale”) units (through the optional <code>scale</code> argument to <code><a href="reference/prepare.html">vtreat::prepare()</a></code>, using some of the ideas discussed <a href="http://www.win-vector.com/blog/2014/06/skimming-statistics-papers-for-the-ideas-instead-of-the-complete-procedures/">here</a>). This allows correct/sensible application of principal component analysis pre-processing in a machine learning context.</li>
<li>Joining in additional training distribution data (which can be useful in analysis, called “catP” and “catD”).</li>
</ul>
<p>The idea is: even with a sophisticated machine learning algorithm there are <em>many</em> ways messy real world data can defeat the modeling process, and vtreat helps with at least ten of them. We emphasize: these problems are already in your data, you simply build better and more reliable models if you attempt to mitigate them. Automated processing is no substitute for actually looking at the data, but vtreat supplies efficient, reliable, documented, and tested implementations of many of the commonly needed transforms.</p>
<p>To help explain the methods we have prepared some documentation:</p>
<ul>
<li>The <a href="https://winvector.github.io/vtreat/index.html">vtreat package overall</a>.</li>
<li><a href="http://winvector.github.io/DataPrep/EN-CNTNT-Whitepaper-Data-Prep-Using-R.pdf">Preparing data for analysis using R white-paper</a></li>
<li>The <a href="https://winvector.github.io/vtreat/articles/vtreatVariableTypes.html">types of new variables</a> introduced by vtreat processing (including how to limit down to domain appropriate variable types).</li>
<li>Statistically sound treatment of the nested modeling issue introduced by any sort of pre-processing (such as vtreat itself): <a href="https://winvector.github.io/vtreat/articles/vtreatOverfit.html">nested over-fit issues</a> and a general <a href="https://winvector.github.io/vtreat/articles/vtreatCrossFrames.html">cross-frame solution</a>.</li>
<li>
<a href="https://winvector.github.io/vtreat/articles/vtreatSignificance.html">Principled ways to pick significance based pruning levels</a>.</li>
</ul>
<p>Data treatments are “y-aware” (use distribution relations between independent variables and the dependent variable). For binary classification use <code><a href="reference/designTreatmentsC.html">designTreatmentsC()</a></code> and for numeric regression use <code><a href="reference/designTreatmentsN.html">designTreatmentsN()</a></code>.</p>
<p>After the design step, <code><a href="reference/prepare.html">prepare()</a></code> should be used as you would use model.matrix. <code><a href="reference/prepare.html">prepare()</a></code> treated variables are all numeric and never take the value NA or +-Inf (so are very safe to use in modeling).</p>
<p>In application we suggest splitting your data into three sets: one for building vtreat encodings, one for training models using these encodings, and one for test and model evaluation.</p>
<p>The purpose of <code>vtreat</code> library is to reliably prepare data for supervised machine learning. We try to leave as much as possible to the machine learning algorithms themselves, but cover most of the truly necessary typically ignored precautions. The library is designed to produce a <code>data.frame</code> that is entirely numeric and takes common precautions to guard against the following real world data issues:</p>
<ul>
<li>
<p>Categorical variables with very many levels.</p>
<p>We re-encode such variables as a family of indicator or dummy variables for common levels plus an additional <a href="http://www.win-vector.com/blog/2012/07/modeling-trick-impact-coding-of-categorical-variables-with-many-levels/">impact code</a> (also called “effects coded”). This allows principled use (including smoothing) of huge categorical variables (like zip-codes) when building models. This is critical for some libraries (such as <code>randomForest</code>, which has hard limits on the number of allowed levels).</p>
</li>
<li>
<p>Rare categorical levels.</p>
<p>Levels that do not occur often during training tend not to have reliable effect estimates and contribute to over-fit. vtreat helps with 2 precautions in this case. First the <code>rareLevel</code> argument suppresses levels with this count our below from modeling, except possibly through a grouped contribution. Also with enough data vtreat attempts to estimate out of sample performance of derived variables. Finally we suggest users reserve a portion of data for vtreat design, separate from any data used in additional training, calibration, or testing.</p>
</li>
<li>
<p>Novel categorical levels.</p>
<p>A common problem in deploying a classifier to production is: new levels (levels not seen during training) encountered during model application. We deal with this by encoding categorical variables in a possibly redundant manner: reserving a dummy variable for all levels (not the more common all but a reference level scheme). This is in fact the correct representation for regularized modeling techniques and lets us code novel levels as all dummies simultaneously zero (which is a reasonable thing to try). This encoding while limited is cheaper than the fully Bayesian solution of computing a weighted sum over previously seen levels during model application.</p>
</li>
<li>
<p>Missing/invalid values NA, NaN, +-Inf.</p>
<p>Variables with these issues are re-coded as two columns. The first column is clean copy of the variable (with missing/invalid values replaced with either zero or the grand mean, depending on the user chose of the <code>scale</code> parameter). The second column is a dummy or indicator that marks if the replacement has been performed. This is simpler than imputation of missing values, and allows the downstream model to attempt to use missingness as a useful signal (which it often is in industrial data).</p>
</li>
<li>
<p>Extreme values.</p>
<p>Variables can be restricted to stay in ranges seen during training. This can defend against some run-away classifier issues during model application.</p>
</li>
<li>
<p>Constant and near-constant variables.</p>
<p>Variables that “don’t vary” or “nearly don’t vary” are suppressed.</p>
</li>
<li>
<p>Need for estimated single-variable model effect sizes and significances.</p>
<p>It is a dirty secret that even popular machine learning techniques need some variable pruning (when exposed to very wide data frames, see <a href="http://www.win-vector.com/blog/2014/02/bad-bayes-an-example-of-why-you-need-hold-out-testing/">here</a> and <a href="https://www.youtube.com/watch?v=X_Rn3EOEjGE">here</a>). We make the necessary effect size estimates and significances easily available and supply initial variable pruning.</p>
</li>
</ul>
<p>The above are all awful things that often lurk in real world data. Automating these steps ensures they are easy enough that you actually perform them and leaves the analyst time to look for additional data issues. For example this allowed us to essentially automate a number of the steps taught in chapters 4 and 6 of <a href="http://practicaldatascience.com/"><em>Practical Data Science with R</em> (Zumel, Mount; Manning 2014)</a> into a <a href="http://winvector.github.io/KDD2009/KDD2009RF.html">very short worksheet</a> (though we think for understanding it is <em>essential</em> to work all the steps by hand as we did in the book). The 2nd edition of <em>Practical Data Science with R</em> covers using <code>vtreat</code> in <code>R</code> in chapter 8 “Advanced Data Preparation.”</p>
<p>The idea is: <code>data.frame</code>s prepared with the <code>vtreat</code> library are somewhat safe to train on as some precaution has been taken against all of the above issues. Also of interest are the <code>vtreat</code> variable significances (help in initial variable pruning, a necessity when there are a large number of columns) and <code><a href="reference/prepare.html">vtreat::prepare(scale=TRUE)</a></code> which re-encodes all variables into effect units making them suitable for y-aware dimension reduction (variable clustering, or principal component analysis) and for geometry sensitive machine learning techniques (k-means, knn, linear SVM, and more). You may want to do more than the <code>vtreat</code> library does (such as Bayesian imputation, variable clustering, and more) but you certainly do not want to do less.</p>
<p>There have been a number of recent substantial improvements to the library, including:</p>
<ul>
<li>Out of sample scoring.</li>
<li>Ability to use <code>parallel</code>.</li>
<li>More general calculation of effect sizes and significances.</li>
</ul>
<p>Some of our related articles (which should make clear some of our motivations, and design decisions):</p>
<ul>
<li><a href="http://www.win-vector.com/blog/2012/07/modeling-trick-impact-coding-of-categorical-variables-with-many-levels/">Modeling trick: impact coding of categorical variables with many levels</a></li>
<li><a href="http://www.win-vector.com/blog/2012/08/a-bit-more-on-impact-coding/">A bit more on impact coding</a></li>
<li><a href="http://www.win-vector.com/blog/2014/08/vtreat-designing-a-package-for-variable-treatment/">vtreat: designing a package for variable treatment</a></li>
<li><a href="http://www.win-vector.com/blog/2014/12/a-comment-on-preparing-data-for-classifiers/">A comment on preparing data for classifiers</a></li>
<li><a href="http://www.slideshare.net/ChesterChen/vtreat">Nina Zumel presenting on vtreat</a></li>
<li><a href="http://www.win-vector.com/blog/2015/05/what-is-new-in-the-vtreat-library/">What is new in the vtreat library?</a></li>
<li><a href="http://www.win-vector.com/blog/2015/08/how-do-you-know-if-your-data-has-signal/">How do you know if your data has signal?</a></li>
</ul>
<p>Examples of current best practice using <code>vtreat</code> (variable coding, train, test split) can be found <a href="https://winvector.github.io/vtreat/articles/vtreatOverfit.html">here</a> and <a href="http://winvector.github.io/KDD2009/KDD2009RF.html">here</a>.</p>
<p>Trivial example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"vtreat"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/packageDescription">packageVersion</a></span>(<span class="st">"vtreat"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"> <span class="co">#  [1] '1.4.8'</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/citation">citation</a></span>(<span class="st">'vtreat'</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"> <span class="co">#  </span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"> <span class="co">#  To cite package 'vtreat' in publications use:</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"> <span class="co">#  </span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"> <span class="co">#    John Mount and Nina Zumel (2019). vtreat: A Statistically Sound</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"> <span class="co">#    'data.frame' Processor/Conditioner.</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"> <span class="co">#    https://github.com/WinVector/vtreat/,</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"> <span class="co">#    https://winvector.github.io/vtreat/.</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"> <span class="co">#  </span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"> <span class="co">#  A BibTeX entry for LaTeX users is</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"> <span class="co">#  </span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"> <span class="co">#    @Manual{,</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"> <span class="co">#      title = {vtreat: A Statistically Sound 'data.frame' Processor/Conditioner},</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"> <span class="co">#      author = {John Mount and Nina Zumel},</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"> <span class="co">#      year = {2019},</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"> <span class="co">#      note = {https://github.com/WinVector/vtreat/, https://winvector.github.io/vtreat/},</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"> <span class="co">#    }</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co"># categorical example</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">dTrainC &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'b'</span>, <span class="ot">NA</span>, <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb1-24" data-line-number="24">   <span class="dt">z=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="ot">NA</span>, <span class="dv">6</span>, <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb1-25" data-line-number="25">   <span class="dt">y=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb1-26" data-line-number="26">dTestC &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="ot">NA</span>), <span class="dt">z=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb1-27" data-line-number="27"></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co"># help("designTreatmentsC")</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"></a>
<a class="sourceLine" id="cb1-30" data-line-number="30">treatmentsC &lt;-<span class="st"> </span><span class="kw"><a href="reference/designTreatmentsC.html">designTreatmentsC</a></span>(dTrainC, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(dTrainC), <span class="st">'y'</span>, <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb1-31" data-line-number="31">                                 <span class="dt">verbose=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb1-32" data-line-number="32"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(treatmentsC<span class="op">$</span>scoreFrame[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'origName'</span>, <span class="st">'varName'</span>, <span class="st">'code'</span>, <span class="st">'rsq'</span>, <span class="st">'sig'</span>, <span class="st">'extraModelDegrees'</span>)])</a>
<a class="sourceLine" id="cb1-33" data-line-number="33"> <span class="co">#    origName   varName  code         rsq        sig extraModelDegrees</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"> <span class="co">#  1        x    x_catP  catP 0.130498074 0.26400089                 2</span></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"> <span class="co">#  2        x    x_catB  catB 0.030345745 0.59013918                 2</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"> <span class="co">#  3        z         z clean 0.237601767 0.13176020                 0</span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"> <span class="co">#  4        z   z_isBAD isBAD 0.296065432 0.09248399                 0</span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"> <span class="co">#  5        x  x_lev_NA   lev 0.296065432 0.09248399                 0</span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39"> <span class="co">#  6        x x_lev_x_a   lev 0.130005705 0.26490379                 0</span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40"> <span class="co">#  7        x x_lev_x_b   lev 0.006067337 0.80967242                 0</span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41"></a>
<a class="sourceLine" id="cb1-42" data-line-number="42"><span class="co"># help("prepare")</span></a>
<a class="sourceLine" id="cb1-43" data-line-number="43"></a>
<a class="sourceLine" id="cb1-44" data-line-number="44">dTrainCTreated &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepare.html">prepare</a></span>(treatmentsC, dTrainC, <span class="dt">pruneSig=</span><span class="fl">1.0</span>, <span class="dt">scale=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-45" data-line-number="45">varsC &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sets">setdiff</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(dTrainCTreated), <span class="st">'y'</span>)</a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="co"># all input variables should be mean 0</span></a>
<a class="sourceLine" id="cb1-47" data-line-number="47"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(dTrainCTreated[, varsC, <span class="dt">drop=</span><span class="ot">FALSE</span>], mean)</a>
<a class="sourceLine" id="cb1-48" data-line-number="48"> <span class="co">#         x_catP        x_catB             z       z_isBAD      x_lev_NA </span></a>
<a class="sourceLine" id="cb1-49" data-line-number="49"> <span class="co">#   2.537498e-16 -1.268826e-16  6.336166e-17  2.536414e-16 -2.537653e-16 </span></a>
<a class="sourceLine" id="cb1-50" data-line-number="50"> <span class="co">#      x_lev_x_a     x_lev_x_b </span></a>
<a class="sourceLine" id="cb1-51" data-line-number="51"> <span class="co">#  -6.345680e-17  1.189718e-17</span></a>
<a class="sourceLine" id="cb1-52" data-line-number="52"><span class="co"># all non NA slopes should be 1</span></a>
<a class="sourceLine" id="cb1-53" data-line-number="53"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(varsC, <span class="cf">function</span>(c) { <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'y'</span>, c, <span class="dt">sep=</span><span class="st">'~'</span>),</a>
<a class="sourceLine" id="cb1-54" data-line-number="54">   <span class="dt">data=</span>dTrainCTreated)<span class="op">$</span>coefficients[[<span class="dv">2</span>]]})</a>
<a class="sourceLine" id="cb1-55" data-line-number="55"> <span class="co">#      x_catP     x_catB          z    z_isBAD   x_lev_NA  x_lev_x_a </span></a>
<a class="sourceLine" id="cb1-56" data-line-number="56"> <span class="co">#  0.23254609 0.05841932 0.16062145 0.03162633 0.03162633 0.23254609 </span></a>
<a class="sourceLine" id="cb1-57" data-line-number="57"> <span class="co">#   x_lev_x_b </span></a>
<a class="sourceLine" id="cb1-58" data-line-number="58"> <span class="co">#  0.24663035</span></a>
<a class="sourceLine" id="cb1-59" data-line-number="59">dTestCTreated &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepare.html">prepare</a></span>(treatmentsC, dTestC, <span class="dt">pruneSig=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(), <span class="dt">scale=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-60" data-line-number="60"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(dTestCTreated)</a>
<a class="sourceLine" id="cb1-61" data-line-number="61"> <span class="co">#        x_catP    x_catB         z   z_isBAD  x_lev_NA  x_lev_x_a  x_lev_x_b</span></a>
<a class="sourceLine" id="cb1-62" data-line-number="62"> <span class="co">#  1 -1.0238626 -3.248380  7.437329 -5.420438 -5.420438 -1.0238626  0.1158472</span></a>
<a class="sourceLine" id="cb1-63" data-line-number="63"> <span class="co">#  2  0.7678969 -2.550396 18.374578 -5.420438 -5.420438  0.7678969 -0.2896179</span></a>
<a class="sourceLine" id="cb1-64" data-line-number="64"> <span class="co">#  3  3.4555361 -2.260694 29.311827 -5.420438 -5.420438  0.7678969  0.1158472</span></a>
<a class="sourceLine" id="cb1-65" data-line-number="65"> <span class="co">#  4  0.7678969  7.422967  0.000000 13.551095 13.551095  0.7678969  0.1158472</span></a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># numeric example</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">dTrainN &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'b'</span>, <span class="ot">NA</span>, <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">   <span class="dt">z=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="ot">NA</span>, <span class="dv">7</span>, <span class="ot">NA</span>), <span class="dt">y=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">dTestN &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="ot">NA</span>), <span class="dt">z=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># help("designTreatmentsN")</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">treatmentsN =<span class="st"> </span><span class="kw"><a href="reference/designTreatmentsN.html">designTreatmentsN</a></span>(dTrainN, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(dTrainN), <span class="st">'y'</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">                                <span class="dt">verbose=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(treatmentsN<span class="op">$</span>scoreFrame[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'origName'</span>, <span class="st">'varName'</span>, <span class="st">'code'</span>, <span class="st">'rsq'</span>, <span class="st">'sig'</span>, <span class="st">'extraModelDegrees'</span>)])</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"> <span class="co">#    origName   varName  code          rsq       sig extraModelDegrees</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"> <span class="co">#  1        x    x_catP  catP 2.105263e-01 0.2528101                 2</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"> <span class="co">#  2        x    x_catN  catN 3.205128e-03 0.8940756                 2</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"> <span class="co">#  3        x    x_catD  catD 6.666667e-02 0.5369633                 2</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"> <span class="co">#  4        z         z clean 2.880952e-01 0.1701892                 0</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"> <span class="co">#  5        z   z_isBAD isBAD 3.333333e-01 0.1339746                 0</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"> <span class="co">#  6        x  x_lev_NA   lev 3.333333e-01 0.1339746                 0</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"> <span class="co">#  7        x x_lev_x_a   lev 2.500000e-01 0.2070312                 0</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"> <span class="co">#  8        x x_lev_x_b   lev 1.110223e-16 1.0000000                 0</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">dTrainNTreated &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepare.html">prepare</a></span>(treatmentsN, dTrainN, <span class="dt">pruneSig=</span><span class="fl">1.0</span>, <span class="dt">scale=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">varsN &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sets">setdiff</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(dTrainNTreated), <span class="st">'y'</span>)</a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co"># all input variables should be mean 0</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(dTrainNTreated[, varsN, <span class="dt">drop=</span><span class="ot">FALSE</span>], mean) </a>
<a class="sourceLine" id="cb2-22" data-line-number="22"> <span class="co">#         x_catP        x_catN        x_catD             z       z_isBAD </span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"> <span class="co">#   2.775558e-17  0.000000e+00 -2.775558e-17  4.857226e-17  6.938894e-18 </span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"> <span class="co">#       x_lev_NA     x_lev_x_a     x_lev_x_b </span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"> <span class="co">#   6.938894e-18  0.000000e+00  7.703720e-34</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co"># all non NA slopes should be 1</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(varsN, <span class="cf">function</span>(c) { <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'y'</span>, c, <span class="dt">sep=</span><span class="st">'~'</span>),</a>
<a class="sourceLine" id="cb2-28" data-line-number="28">   <span class="dt">data=</span>dTrainNTreated)<span class="op">$</span>coefficients[[<span class="dv">2</span>]]}) </a>
<a class="sourceLine" id="cb2-29" data-line-number="29"> <span class="co">#     x_catP    x_catN    x_catD         z   z_isBAD  x_lev_NA x_lev_x_a </span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"> <span class="co">#          1         1         1         1         1         1         1 </span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"> <span class="co">#  x_lev_x_b </span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"> <span class="co">#          1</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33">dTestNTreated &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepare.html">prepare</a></span>(treatmentsN, dTestN, <span class="dt">pruneSig=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(), <span class="dt">scale=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(dTestNTreated)</a>
<a class="sourceLine" id="cb2-35" data-line-number="35"> <span class="co">#    x_catP x_catN      x_catD         z    z_isBAD   x_lev_NA x_lev_x_a</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"> <span class="co">#  1 -0.250  -0.25 -0.06743804 0.9952381 -0.1666667 -0.1666667     -0.25</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"> <span class="co">#  2  0.250   0.00 -0.25818161 2.5666667 -0.1666667 -0.1666667      0.25</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"> <span class="co">#  3  0.625   0.00 -0.25818161 4.1380952 -0.1666667 -0.1666667      0.25</span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39"> <span class="co">#  4  0.250   0.50  0.39305768 0.0000000  0.5000000  0.5000000      0.25</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"> <span class="co">#        x_lev_x_b</span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"> <span class="co">#  1 -2.266233e-17</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"> <span class="co">#  2  6.798700e-17</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"> <span class="co">#  3 -2.266233e-17</span></a>
<a class="sourceLine" id="cb2-44" data-line-number="44"> <span class="co">#  4 -2.266233e-17</span></a>
<a class="sourceLine" id="cb2-45" data-line-number="45"></a>
<a class="sourceLine" id="cb2-46" data-line-number="46"><span class="co"># for large data sets you can consider designing the treatments on </span></a>
<a class="sourceLine" id="cb2-47" data-line-number="47"><span class="co"># a subset like: d[sample(1:dim(d)[[1]], 1000), ]</span></a>
<a class="sourceLine" id="cb2-48" data-line-number="48"></a>
<a class="sourceLine" id="cb2-49" data-line-number="49"><span class="co"># One can also use treatment plans as pipe targets.</span></a>
<a class="sourceLine" id="cb2-50" data-line-number="50">dTrainN <span class="op">%.&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-51" data-line-number="51"><span class="st">  </span>treatmentsN <span class="op">%.&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-52" data-line-number="52"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(.)</a></code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="right">x_catP</th>
<th align="right">x_catN</th>
<th align="right">x_catD</th>
<th align="right">z</th>
<th align="right">z_isBAD</th>
<th align="right">x_lev_NA</th>
<th align="right">x_lev_x_a</th>
<th align="right">x_lev_x_b</th>
<th align="right">y</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.50</td>
<td align="right">-0.25</td>
<td align="right">0.5000000</td>
<td align="right">1.000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0.50</td>
<td align="right">-0.25</td>
<td align="right">0.5000000</td>
<td align="right">2.000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0.50</td>
<td align="right">-0.25</td>
<td align="right">0.5000000</td>
<td align="right">3.000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0.50</td>
<td align="right">-0.25</td>
<td align="right">0.5000000</td>
<td align="right">4.000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">0.25</td>
<td align="right">0.00</td>
<td align="right">0.7071068</td>
<td align="right">5.000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0.25</td>
<td align="right">0.00</td>
<td align="right">0.7071068</td>
<td align="right">3.666667</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">0.25</td>
<td align="right">0.50</td>
<td align="right">0.0000000</td>
<td align="right">7.000000</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">0.25</td>
<td align="right">0.50</td>
<td align="right">0.0000000</td>
<td align="right">3.666667</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Related work:</p>
<ul>
<li>Cohen J, Cohen P (1983). Applied Multiple Regression/Correlation Analysis For The Behavioral Sciences. 2 edition. Lawrence Erlbaum Associates, Inc. ISBN 0-89859-268-2.</li>
<li>
<a href="http://dl.acm.org/citation.cfm?id=507538">“A preprocessing scheme for high-cardinality categorical attributes in classification and prediction problems”</a> Daniele Micci-Barreca; ACM SIGKDD Explorations, Volume 3 Issue 1, July 2001 Pages 27-32.</li>
<li>
<a href="http://www.win-vector.com/blog/2012/07/modeling-trick-impact-coding-of-categorical-variables-with-many-levels/">“Modeling Trick: Impact Coding of Categorical Variables with Many Levels”</a> Nina Zumel; Win-Vector blog, 2012.</li>
<li>“Big Learning Made Easy – with Counts!”, Misha Bilenko, Cortana Intelligence and Machine Learning Blog, 2015.</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install, from inside <code>R</code> please run:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"vtreat"</span>)</a></code></pre></div>
</div>
<div id="note" class="section level2">
<h2 class="hasAnchor">
<a href="#note" class="anchor"></a>Note</h2>
<p>Note: <code>vtreat</code> is meant only for “tame names”, that is: variables and column names that are also valid <em>simple</em> (without quotes) <code>R</code> variables names.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=vtreat">https://​cloud.r-project.org/​package=vtreat</a>
</li>
<li>Browse source code at <br><a href="https://github.com/WinVector/vtreat">https://​github.com/​WinVector/​vtreat</a>
</li>
<li>Report a bug at <br><a href="https://github.com/WinVector/vtreat/issues">https://​github.com/​WinVector/​vtreat/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>John Mount <br><small class="roles"> Author, maintainer </small>  </li>
<li>Nina Zumel <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>


      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://doi.org/10.21105/joss.00584"><img src="http://joss.theoj.org/papers/10.21105/joss.00584/status.svg" alt="DOI"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.1173313"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.1173313.svg" alt="DOI"></a></li>
<li><a href="https://cran.r-project.org/package=vtreat"><img src="https://www.r-pkg.org/badges/version/vtreat" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Mount, Nina Zumel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
